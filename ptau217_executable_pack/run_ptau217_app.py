# run_ptau217_app.py â€” single-file runner for the pTau217 PWA
# It writes embedded assets to a temp dir, starts a local HTTP server (with a tiny backend),
# opens your browser, and keeps serving until you stop it.
import os, sys, tempfile, threading, webbrowser, time, base64, json
from http.server import SimpleHTTPRequestHandler, ThreadingHTTPServer
from urllib.parse import urlparse

PORT_START = 5173

ASSETS_TEXT = {
  "index.html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\"/>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\"/>\n<meta name=\"theme-color\" content=\"#0b0f1c\"/>\n<title>pTau217/A\u03b242 Bayesian Calculator</title>\n<link rel=\"manifest\" href=\"manifest.webmanifest\"/>\n<link rel=\"apple-touch-icon\" href=\"assets/icon-192.png\"/>\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\"/>\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\"/>\n<link rel=\"stylesheet\" href=\"styles.css\"/>\n</head>\n<body>\n<header class=\"header\">\n  <div class=\"header-inner wrap\">\n    <div class=\"brand\">\n      <div class=\"logo\">\u03b2</div>\n      <div class=\"name\">pTau217/A\u03b2<sub>42</sub> Bayesian</div>\n      <span id=\"offline\" class=\"offline\">Offline</span>\n    </div>\n  </div>\n</header>\n\n<main class=\"main wrap\">\n  <section class=\"card\">\n    <h1 class=\"h\">Clinical context</h1>\n    <div class=\"small muted\">\n      <span class=\"badge\">Diagnostic</span> Posterior P(amyloid+ | Lumipulse pTau217/A\u03b2<sub>42</sub>) via Bayes on <em>odds</em>.\n      <span class=\"badge\">Prognostic</span> Short-horizon conversion risk via constant-hazard mixture.\n    </div>\n  </section>\n\n  <nav class=\"tabs\">\n    <button class=\"tab-btn\" aria-selected=\"true\" onclick=\"document.getElementById('panel-dx').style.display='block';document.getElementById('panel-prog').style.display='none';\">Diagnostic (Amyloid)</button>\n    <button class=\"tab-btn\" aria-selected=\"false\" onclick=\"document.getElementById('panel-dx').style.display='none';document.getElementById('panel-prog').style.display='block';\">Prognostic (Conversion)</button>\n  </nav>\n\n  <section id=\"panel-dx\" class=\"tab card\">\n    <h2 class=\"h\">Inputs</h2>\n    <div class=\"grid\">\n      <div class=\"card\">\n        <label>Age (years)</label>\n        <input type=\"number\" id=\"age\" min=\"18\" max=\"100\" step=\"1\" value=\"70\">\n        <label>Baseline stage</label>\n        <select id=\"stage\">\n          <option value=\"CN\">Cognitively normal (CN)</option>\n          <option value=\"SCD\">Subjective cognitive decline (SCD)</option>\n          <option value=\"MCI\" selected>Mild cognitive impairment (MCI)</option>\n          <option value=\"DEM\">Dementia (etiology uncertain)</option>\n        </select>\n        <label>APOE genotype (optional)</label>\n        <select id=\"apoe\">\n          <option value=\"unknown\" selected>Unknown / not tested</option>\n          <option value=\"e2e2\">\u03b52/\u03b52</option>\n          <option value=\"e2e3\">\u03b52/\u03b53</option>\n          <option value=\"e2e4\">\u03b52/\u03b54</option>\n          <option value=\"e3e3\">\u03b53/\u03b53</option>\n          <option value=\"e3e4\">\u03b53/\u03b54</option>\n          <option value=\"e4e4\">\u03b54/\u03b54</option>\n        </select>\n      </div>\n\n      <div class=\"card\">\n        <label>Lumipulse pTau217/A\u03b2<sub>42</sub> category</label>\n        <select id=\"testcat\">\n          <option value=\"neg\">Negative (\u2264 0.00370)</option>\n          <option value=\"indet\">Indeterminate (0.00371\u20130.00737)</option>\n          <option value=\"pos\" selected>Positive (\u2265 0.00738)</option>\n        </select>\n        <div class=\"hr\"></div>\n        <h3 class=\"h\">Likelihood ratios</h3>\n        <div class=\"grid\">\n          <div>\n            <label>LR<sub>+</sub> (Positive)</label>\n            <input type=\"number\" id=\"lr_pos\" value=\"10.68\" step=\"0.01\">\n            <div class=\"small muted\">95% CI 6.90\u201316.79</div>\n          </div>\n          <div>\n            <label>LR (Indeterminate)</label>\n            <input type=\"number\" id=\"lr_indet\" value=\"0.96\" step=\"0.01\">\n            <div class=\"small muted\">95% CI 0.67\u20131.36</div>\n          </div>\n          <div>\n            <label>LR<sub>-</sub> (Negative)</label>\n            <input type=\"number\" id=\"lr_neg\" value=\"0.03\" step=\"0.001\">\n            <div class=\"small muted\">95% CI 0.01\u20130.06</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <button class=\"btn\" id=\"calc_dx\">Compute posterior</button>\n      <label class=\"small\"><input type=\"checkbox\" id=\"uncert\"> Show uncertainty (LR 95% CIs)</label>\n    </div>\n\n    <div class=\"card\">\n      <h2 class=\"h\">Diagnostic output</h2>\n      <div class=\"result\" id=\"post_p\">Posterior P(A+) \u2014</div>\n      <div class=\"small muted\" id=\"post_details\"></div>\n      <div class=\"callout small\">Indeterminate band provides minimal information (LR\u22481); follow-up per local protocol.</div>\n    </div>\n  </section>\n\n  <section id=\"panel-prog\" class=\"tab card\" style=\"display:none\">\n    <h2 class=\"h\">Inputs</h2>\n    <div class=\"grid\">\n      <div class=\"card\">\n        <label>Use posterior from Diagnostic tab?</label>\n        <select id=\"use_posterior\">\n          <option value=\"yes\" selected>Yes \u2014 use P(A+)</option>\n          <option value=\"no\">No \u2014 enter P(A+)</option>\n        </select>\n        <label>Manual P(A+) (if not using posterior)</label>\n        <input type=\"number\" id=\"manual_pa\" min=\"0\" max=\"1\" step=\"0.001\" placeholder=\"e.g., 0.70\">\n        <label>Baseline stage (prognosis)</label>\n        <select id=\"stage_prog\">\n          <option value=\"CN\">Cognitively normal (CN)</option>\n          <option value=\"MCI\" selected>MCI</option>\n        </select>\n      </div>\n\n      <div class=\"card\">\n        <h3 class=\"h\">Annual conversion hazards (editable)</h3>\n        <div class=\"grid\">\n          <div><label>CN: A+ annual hazard</label><input type=\"number\" id=\"h_cn_pos\" value=\"0.03\" min=\"0\" max=\"1\" step=\"0.001\"></div>\n          <div><label>CN: A\u2212 annual hazard</label><input type=\"number\" id=\"h_cn_neg\" value=\"0.01\" min=\"0\" max=\"1\" step=\"0.001\"></div>\n          <div><label>MCI: A+ annual hazard</label><input type=\"number\" id=\"h_mci_pos\" value=\"0.21\" min=\"0\" max=\"1\" step=\"0.001\"></div>\n          <div><label>MCI: A\u2212 annual hazard</label><input type=\"number\" id=\"h_mci_neg\" value=\"0.063\" min=\"0\" max=\"1\" step=\"0.001\"></div>\n        </div>\n        <div class=\"hr\"></div>\n        <label>Time horizon (years)</label>\n        <input type=\"number\" id=\"t_years\" value=\"3\" min=\"0.25\" max=\"10\" step=\"0.25\">\n      </div>\n    </div>\n\n    <div class=\"row\"><button class=\"btn\" id=\"calc_prog\">Compute projected risk</button></div>\n\n    <div class=\"card\">\n      <h2 class=\"h\">Prognostic output</h2>\n      <div class=\"result\" id=\"risk_out\">Projected Risk (t years) \u2014</div>\n      <div class=\"small muted\" id=\"prog_details\"></div>\n      <div class=\"callout small\">Short-term, constant hazard assumption. For longer spans, use age-advancing hazards or cohort survival curves.</div>\n    </div>\n  </section>\n</main>\n\n<script src=\"app.js\"></script>\n</body>\n</html>\n",
  "styles.css": "\n:root{\n  --bg:#0b0f1c;\n  --bg-grad: radial-gradient(1200px 800px at 80% -10%, #233e92 0%, rgba(35,62,146,0.15) 40%, transparent 70%),\n             radial-gradient(900px 600px at -20% 110%, #7b2fbf 0%, rgba(123,47,191,0.12) 45%, transparent 70%),\n             linear-gradient(#0b0f1c,#0b0f1c);\n  --panel:#11152a;\n  --border:#2a3152;\n  --text:#e9ebf3;\n  --muted:#b9bfd6;\n  --r:16px;\n}\n*{box-sizing:border-box}\nhtml,body{margin:0;padding:0;background:var(--bg);background-image:var(--bg-grad);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.35}\na{color:#9fc1ff}\n.wrap{max-width:940px;margin:0 auto;padding:20px}\n.header{position:sticky;top:0;z-index:50;background:rgba(11,15,28,.6);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}\n.header-inner{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:12px 16px}\n.brand{display:flex;gap:10px;align-items:center}\n.brand .logo{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#6aa8ff,#b485ff);display:grid;place-items:center;color:#0b0f1c;font-weight:800;box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)}\n.brand .name{font-weight:700;font-size:1.05rem}\n.badge{border:1px solid rgba(255,255,255,.12);border-radius:999px;padding:5px 10px;color:var(--muted);font-size:.84rem}\n.btn{background:linear-gradient(180deg,#293569,#232c56);color:white;border:1px solid #41509e;border-radius:12px;padding:10px 14px;cursor:pointer;box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)}\n.btn:active{transform:translateY(1px)}\n.btn.secondary{background:#161c3a;border-color:#35407a}\n.main{padding:16px}\n.card{background:linear-gradient(180deg, rgba(24,28,47,.95), rgba(16,20,42,.95));border:1px solid var(--border);border-radius:var(--r);padding:16px;margin:14px 0;box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)}\n.h{margin:0 0 10px}\n.muted{color:var(--muted)}\n.grid{display:grid;gap:12px}\n@media(min-width:720px){ .grid{grid-template-columns:1fr 1fr} }\nlabel{display:block;margin:8px 0 6px;color:#cfd5f2;font-size:.95rem}\ninput[type=\"number\"], select{width:100%;padding:12px;border-radius:12px;border:1px solid #36407a;background:#0f1330;color:var(--text);outline:none;box-shadow:inset 0 1px 0 rgba(255,255,255,.03)}\n.row{display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end}\n.pill{display:inline-block;padding:3px 8px;border:1px solid #3a4474;border-radius:999px;font-size:.85rem;margin-left:6px;color:#cbd3ff}\n.result{font-size:1.4rem;font-weight:800}\n.small{font-size:.92rem}\n.hr{border-top:1px solid #2a3152;margin:14px 0}\n.tabs{display:flex;gap:8px;flex-wrap:wrap}\n.tab-btn{border:1px solid #34406d;background:#10142a;color:#e9ebf3;border-radius:999px;padding:10px 14px;cursor:pointer;box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03)}\n.tab-btn[aria-selected=\"true\"]{background:#2a3152}\n.callout{background:#0e1433;border:1px dashed #384079;padding:12px;border-radius:12px}\n.footer{font-size:.85rem;margin-top:24px;color:#b7bdd6}\n.offline{display:none}\n.offline.show{display:inline-flex;align-items:center;gap:6px;color:#ffd166}\nkbd{background:#0b0f1c;border:1px solid #2a3152;border-bottom-width:3px;border-radius:6px;padding:2px 6px;font-weight:700}\n",
  "app.js": "\nlet deferredPrompt=null;\nconst installBtn=null; // not used in desktop exe\nconst offlineBadge=document.getElementById(\"offline\");\nfunction updateOnline(){ if(!navigator.onLine){ offlineBadge?.classList.add(\"show\"); } else { offlineBadge?.classList.remove(\"show\"); } }\nwindow.addEventListener(\"online\",updateOnline); window.addEventListener(\"offline\",updateOnline); updateOnline();\n\nconst clamp=(x,lo,hi)=>Math.max(lo,Math.min(hi,x));\nconst toOdds=p=>p/(1-p), fromOdds=o=>o/(1+o);\nfunction lerp(x,x0,y0,x1,y1){ if(x<=x0)return y0; if(x>=x1)return y1; const t=(x-x0)/(x1-x0); return y0+t*(y1-y0); }\nconst APOE_OR={\"unknown\":1.0,\"e3e3\":1.0,\"e2e2\":0.6,\"e2e3\":0.6,\"e2e4\":2.6,\"e3e4\":3.5,\"e4e4\":12.0};\nconst PRIOR_ANCHORS={\"CN\":{a50:0.10,a90:0.44},\"SCD\":{a50:0.12,a90:0.43},\"MCI\":{a50:0.27,a90:0.71},\"DEM\":{a50:0.60,a90:0.85}};\nfunction priorFromAgeStage(age,stage){ const a=PRIOR_ANCHORS[stage]||PRIOR_ANCHORS[\"MCI\"]; return clamp(lerp(age,50,a.a50,90,a.a90),0.01,0.99); }\nfunction applyAPOEonOdds(p,apoe){ const or=APOE_OR[apoe]??1.0; const o=toOdds(clamp(p,1e-6,1-1e-6)); return clamp(fromOdds(o*or),1e-6,1-1e-6); }\nfunction lrForCategory(cat,lp,li,ln){ return cat===\"pos\"?lp:(cat===\"indet\"?li:ln); }\nfunction computePosterior(prior_p,lr,lo=null,hi=null){\n  const o0=toOdds(clamp(prior_p,1e-9,1-1e-9)); const p=fromOdds(o0*lr);\n  if(lo!=null&&hi!=null){ return {p,plo:fromOdds(o0*lo),phi:fromOdds(o0*hi)}; }\n  return {p};\n}\nfunction fmtPct(x){ if(!isFinite(x)) return \"\u2014\"; const p=x*100; return p<0.1? p.toFixed(2)+\"%\": p.toFixed(1)+\"%\"; }\nfunction updateAutoPrior(){\n  const age=Number(document.getElementById(\"age\").value||70);\n  const stage=document.getElementById(\"stage\").value;\n  const apoe=document.getElementById(\"apoe\").value;\n  let p=priorFromAgeStage(age,stage); p=applyAPOEonOdds(p,apoe);\n  document.getElementById(\"auto_prior\").value=(Math.round(p*1000)/1000).toFixed(3); return p;\n}\nfunction computeDiagnostic(){\n  const p_auto=updateAutoPrior(); const prior_override=document.getElementById(\"prior_override\").value;\n  const prior=prior_override? clamp(Number(prior_override),1e-6,1-1e-6): p_auto;\n  const lp=Number(document.getElementById(\"lr_pos\").value);\n  const li=Number(document.getElementById(\"lr_indet\").value);\n  const ln=Number(document.getElementById(\"lr_neg\").value);\n  const cat=document.getElementById(\"testcat\").value;\n  const showUncert=document.getElementById(\"uncert\").checked;\n  const LR=lrForCategory(cat,lp,li,ln);\n  let res;\n  if(showUncert){ const CIs={pos:[6.90,16.79],indet:[0.67,1.36],neg:[0.01,0.06]}; const [lo,hi]=CIs[cat]; res=computePosterior(prior,LR,lo,hi); }\n  else{ res=computePosterior(prior,LR); }\n  const out=document.getElementById(\"post_p\");\n  out.textContent = res.plo!==undefined ?\n    `Posterior P(A+) = ${fmtPct(res.p)}  (\u2248 ${fmtPct(res.plo)} to ${fmtPct(res.phi)} using LR 95% CI)`:\n    `Posterior P(A+) = ${fmtPct(res.p)}`;\n  document.getElementById(\"post_details\").innerHTML=`Prior P(A+)=${fmtPct(prior)} \u00b7 LR=${LR.toFixed(2)} \u2192 posterior on odds. `+\n    (prior_override? \"<span class='pill'>Using prior override</span>\" : \"<span class='pill'>Auto prior</span>\");\n  window.__POSTERIOR__=res.p;\n}\nfunction computePrognostic(){\n  const usePosterior=document.getElementById(\"use_posterior\").value===\"yes\";\n  const pa=usePosterior?(window.__POSTERIOR__??0.5): Number(document.getElementById(\"manual_pa\").value||0.5);\n  const stage=document.getElementById(\"stage_prog\").value;\n  const t=Number(document.getElementById(\"t_years\").value||3);\n  const h_cn_pos=Number(document.getElementById(\"h_cn_pos\").value);\n  const h_cn_neg=Number(document.getElementById(\"h_cn_neg\").value);\n  const h_mci_pos=Number(document.getElementById(\"h_mci_pos\").value);\n  const h_mci_neg=Number(document.getElementById(\"h_mci_neg\").value);\n  let h_pos=stage===\"CN\"?h_cn_pos:h_mci_pos, h_neg=stage===\"CN\"?h_cn_neg:h_mci_neg;\n  const risk_pos=1-Math.pow(1-h_pos,t), risk_neg=1-Math.pow(1-h_neg,t);\n  const risk_mix=clamp(pa*risk_pos+(1-pa)*risk_neg,0,0.999);\n  document.getElementById(\"risk_out\").textContent=`Projected ${t}-year conversion risk = ${fmtPct(risk_mix)}  (A+: ${fmtPct(risk_pos)}, A\u2212: ${fmtPct(risk_neg)}, P(A+)=${fmtPct(pa)})`;\n  document.getElementById(\"prog_details\").innerHTML=`Constant hazard mixture: P = P(A+)\u00d7[1\u2212(1\u2212h_A+)^t] + (1\u2212P(A+))\u00d7[1\u2212(1\u2212h_A\u2212)^t].`;\n}\n[\"age\",\"stage\",\"apoe\"].forEach(id=>document.getElementById(id).addEventListener(\"input\",updateAutoPrior));\ndocument.getElementById(\"calc_dx\").addEventListener(\"click\",computeDiagnostic);\ndocument.getElementById(\"calc_prog\").addEventListener(\"click\",computePrognostic);\nupdateAutoPrior(); computeDiagnostic();\n",
  "manifest.webmanifest": "{\n  \"name\": \"pTau217/A\\u03b242 Bayesian Calculator\",\n  \"short_name\": \"pTau217 Bayesian\",\n  \"description\": \"Offline Bayesian calculator for pTau217/A\\u03b242 (Lumipulse): Diagnostic & Prognostic\",\n  \"start_url\": \"./index.html\",\n  \"scope\": \"./\",\n  \"display\": \"standalone\",\n  \"background_color\": \"#0b0f1c\",\n  \"theme_color\": \"#0b0f1c\",\n  \"icons\": [\n    {\n      \"src\": \"assets/icon-192.png\",\n      \"sizes\": \"192x192\",\n      \"type\": \"image/png\"\n    },\n    {\n      \"src\": \"assets/icon-512.png\",\n      \"sizes\": \"512x512\",\n      \"type\": \"image/png\"\n    }\n  ]\n}",
  "sw.js": "\nconst CACHE='ptau217-pwa-v1';\nconst ASSETS=['./','./index.html','./styles.css','./app.js','./manifest.webmanifest','./assets/icon-192.png','./assets/icon-512.png'];\nself.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(ASSETS)));self.skipWaiting();});\nself.addEventListener('activate',e=>{e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>k!==CACHE?caches.delete(k):null))));self.clients.claim();});\nself.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{const copy=res.clone();caches.open(CACHE).then(c=>c.put(e.request,copy));return res;}).catch(()=>caches.match('./index.html'))));});\n",
}

ASSETS_BIN = {
  "assets/icon-192.png": "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",
  "assets/icon-512.png": "iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAiYklEQVR4nO3debgeZXk/8Hm3syUhCdkXCAlrILKFnWKAUlQKVBFQEFpBRERF6pJfay21qNCKdkEWd6QWN1apwo9FECgICYtsskMDGEASQkhycrb3vP2DRhEhOcl533lm5vl8rmv+4LrCeecsM/d37pl7ntLJP2w0EgAgKtVE+QeA6JRD7wAAkD4BAAAiJAAAQIQEAACIkAAAABGqlkLvAQCQOh0AAIiQAAAAERIAACBCAgAAREgAAIAICQAAECFjgAAQIasBAkCE3AIAgAgJAAAQIQEAACIkAABAhAQAAIiQMUAAiJAOAABESAAAgAgJAAAQIQEAACIkAABAhAQAAIiQMUAAiJDVAAEgQtXQO8Dw3X/xBaF3AYjQW444LvQuMAylUy5q6AHkgCIP5IlwkH0CQAYp9kARCQXZIgBkgIIPxEggCEsACETRB/g9YSB9pY8LAKm5T9EHWKfthYFUCAApUPgB1p8g0FoCQIso+gDNIww0nwDQZAo/QOsIAs0jADSJwg+QHkFg+ASAYVL4AcIRBDacALCBFH6A7BAE1l/pVAFgvdyr8ANk1g6CwJCVk0aS2Ia2Kf4A2XbvxRcErxV52Uqn/qcOwLrce4nCD5A3OxyuG7A2AsBa5KnwL7jxtOWh9wGIx277nT469D4MlSDwxgSAN5HF4q/IA3mQxXAgBPwxAeANZKX4K/hAEWQlEAgBf0gAeI3QhV/BB2IQOhAIAq8q/bUAkCRJkvwqUPFX9IGYhQoDOwoBAkCShCn+Cj/A74UIArGHgKgDQNqFX9EHWLe0w0CsQSDaAJBm8Vf4AdZfmkEgxhAQZQBIq/gr/ADDl1YQiC0ERBcA0ij+Cj9A86URBGIKAVEFgFYXf4UfoPVaHQRiCQHlUpIkMWyKP0AxtPp8+6tLLghes1LZPvG94ncA7rm0dcVf4QcIp5XdgJ3eXexOQDn0DrSa4g9QXK08D7eyfmRBoTsArfrlKfwA2dOqbkBROwGF7QAo/gBxadX5uaidgEIGAMUfIE5CwNAV7hZAK35JCj9A/rTilkCRbgcUagxQ8QdgjVacv++5tDgjgoW8BdAsij9AvjmPv7nCBIC7m3z1748GoBiafT5vdr0JpRABQPEHYG2EgD+W+wCg+AMwFELAH8p9AGgmxR+g2Jznfy/XAaCZ6csfBUAcmnm+z3MXILdjgIo/ABuq2SEgdE2MZgzwLsUfgGFq5vm/mXUpLeWkkSS525pE8QeIW1PrQOjauJ5b7joAd13WnJSl+AOQJM2rB82qT2nJXQAAAIYvVwHA1T8ArRBjFyA3AUDxB6CVYgsBuRkDbAbFH4C1aVadCF0zCzMGeGdO0hQAJEk+6lYuAkAzuPoHYChiqReZDwDNSFGx/DIBaI5m1I2sdwEyHwAAgObLdABw9Q9AKEXvAmQ6AAyX4g/AcBS5jmR2DDDLqQkAhurOy7K5WmBhOwBFTm0ApKeo9SSTqwEudPUPQIEsvOyC4LU196sBDkVR0xoAYRSxrhQyAAAAa5e5ALDw8uG1/4uY0gAIb7j1Zbj1rdmqpdB7AACRyFLNzVQHYIGrfwAybLh1Zrh1rpkyFQAAgHQIAAAQocwEAO1/APKgKLcBMhMAAID0FCIAuPoHIE1FqDuZWAwoK+0QAEjDgsvDLxBUiA4AALB+ch8AitCGASB/8l5/qkkj9C4AQIQC19/gHYA7rnD/H4D4hK5/wQMAAJC+XAeAvN9/ASDf8lyHrAYIAIGErMG57gAAABsmaAC43QOAAEQsZB3MbQcgz/ddACiOvNaj3AYAAGDDCQAAECEBAAAiZAwQAAIKVYd1AAAgQsECwC+NAAJAsHpYThpJEmQbhryOXABQTMOuSwHqsFsAABAhAQAAIiQAAECEjAECQGAharEOAABESAAAgAgJAAAQIQEAACIkAABAhAQAAIiQMUAACMwYIACQCgEAACIkAABAhKrDXZoXABimALVYBwAAIiQAAECEjAECQGDGAAGAVAgAABAhAQAAIiQAAECEBAAAiJAAAAARMgYIAIEZAwQAUiEAAECEBAAAiJDVAAEgNKsBAgBpEAAAIELGAAEgMGOAAEAqBAAAiJAAAAAREgAAIEICAABESAAAgAgZAwSAwIwBAgCpEAAAIEICAABEyGqAABCa1QABgDQIAAAQIWOAABCYMUAAIBUCAABESAAAgAgJAAAQIQEAACIkAABAhIwBAkBgxgABgFQIAAAQIQEAACJkNUAooFKplEycOqs8bda2lQmTNyuPnzKjPGHKZuVRY8aXO7pGlTo6RyRt7Z2lxuBgUq/Xk3q9v1Ef6E8G+vsafb2rk9WrVjRefO6pwWeffLD+7FMP1p998sH6ipeXOFtAqwQ4uqrpfyTQbLW2jtIW2+1W2WK7PaozttqxMmPLHSqdIzZa53NFpUo5KVeqSS1pX/Nvf/f/bLrFWypz9zm0tua/l734m8FH7r114JH7bh149L5b68tfemGwBd8KkBJTAJBT0zabXZm987zq7J3eWp01e7dqra29pZ83dsK08h4HHNm2xwFHtiVJkvzmqV/X77rlyv67bv5J/9LfPisMwDCEqMU6AJAjYydMK+95wHva5r710NqkaZsHfYZn2sxtK9Nmbls59C//puOpR+6u33bN9/sW3nR530B/X8jdAoZIAIAc2HSL7SsHHHZS+457HVQrlyuhd+ePzNx658rMrXfuPPSv/qbjv6/+z76br7qw1zMDkG0CAGTYpGmblw85dn7HjnsdVFv3vw5v1OjxpXe899T2P33Xh9puuOKbfddfdn5vz+qVggBkkAAAGVRr61hTSNsrlfwdpm3tnaW3v+eU9r3ffnTbz77/Lz23/v+L+hoNjwlAlngPAGTMlm/Zs/rZc28YeeDhH8ll8X+tUaPHl9774TM6Tz3zkhHjJ89wvoEMcUBCRpQr1eSQY+d3nPKFH44YN2mTQh2bm2+7a/UzZ1878q0H/WVb6H0BXmUMEDJg9NiJpRP+9hsjZm4zN3tP+DVJW0dX6ciTvtg5c5u51e+fM7+7v6839C5BZlgMCCI0c+udK/P/7epRRS7+r7XrvofVPn7GxSNHj53o+gMCEgAgoJ32PjjKYrjZVjtVPvXlK0cW7VYH5ImDDwKZd/BxbcfPP7erWovztvjYCdPKp55xceGed4C8cOBBAAcd9YmOI048vbNUivsQXBMCNp44Pe4fBARQThpJEmSDSB1yzPyOg47669a+uD9Hxk6YVv7Q3327q62jK6rbIPAHAtRhqRtSdMix8zveduTHFP/XmTZz28oxp3y5M/R+QEzKpeTV8YO0N4jNPu84tu1tRyj+b2bnPzmklpdXHkOzhajDOgCQgu122b96xIc+7wp3HY448fSOjq6RrhEgBQIAtNi0mdtWjp9/XlcWV/HLmtEbTyrPO/i4OMciIGUCALRQra09Of7T53a1d4xwVTtE+x16QrsHAqH1BABooYPf9+mOSdO3cJyth5EbbVzabb93exYAWsyJCVpk5jZzK/u/84Me+tsAu+13mNsA0GL5XmsUMqpcriTHnPLlrtAv+mk0BpNFj91bf/DOG/qfffLBweeffby+asWyRm/3ykZSKiXtHV2lMeMml8dP2aw8a5u5ldk771udttns4A8rzNpml8r4yZuWlzz/9GDofYGishogtMDu+x/eFrL1P1gfSG699gd9P7/8671Lnl/0pkW0e+XyRvfK5fXFix6p33f7Nf1XfPeMZPqs7Spvf8/H23fc8x1B2/Dbzd2/etPPvtsXch8gLVYDhAKoVKrJ2997arDW//PPPDb4pU8esvJH539m9dqK/5t59skH698688Tur3/h+O7ulcuDvbdzy+330qGEFhIAoMn2ftvRbeMCvdv+yYfvrH9l/jtXPvvkA/Xhfq37F1zX/29/++5VK5cvDRICtpqzZ7VU0qOEVhEAoIlKpXLyZ4d/JMjV/5LnFw2e/49/tWr1qleaVrAXL3qk/s1/OrF7cHDYeWK9dY0aU7JIELSOgwuaaPbO86pjx09N/bhqNAaTb//zh7ubWfzXeOLBBQO3XP29IPfip2y6tXMUtIiDC5pozwPeE2R87fafX9z3zBP3t+wy/WcXfbln1Yplqd8KmLLpVsEnEqCoLAcMTTJyo41L2+9+YOpPzjcag8k1Pz67t5Wf0b1yeeO6S89v6We8kXGTNnGRQhxCLAdsNUBojrlv/YtapZr+5NyDd904kMa8/IIbL+lL+1mAjcZOdLogClYDhBybs+sBQebmF9x4aSr3519Z9mLjobtvGkjjs9bYaOwE5yhoEQcXNEGtrT3ZYrvdU59b7+/rTR5ceENqRfm+O67tT+uzkuTV2yppfh7ERACAJthizh7VWlv6039P/HrBQG/PqtSeqnnmiftSvQdQrVlKAVpFAIAmmL3TvCBvrXv0vltTbcn/5qmH6gP96U0E1tradQCgRQQAaIIt5+wRJAA88dDCVK/I6/WBJM0Femo6ANAyAgAMU7lSTaZsunXq8+qNRiP5zVO/Tv0VfatXpbc+wGDDYoDQKlYDhGGaNG1WpVpL//0/S194ZrCne2Xqb9VoxdsG30x/b09aHwVBWQ0QcmjazG2DHEe/XfxkkMvjNEPHKy+/qAUALSIAwDBNn7ltkNfVLnlu/Zf6bYa2js7ULlZe+u2zAgC0iAAAwzRx2uZBjqOXXgxTHMdP3iy173fxoocFAGgRAQCGacy4KUGOo1eWpd8e7+gaWZo4bWZq3+/Tj6f73gGIiQAAwzR63KQgx9GKl19M/QHA2TvNq5bL6dzxGBysJ4/d/8tU33MAMalamQ82XLlcSUaNHhdkmGbVipdTP3p32+/dqa138NTDdw90r0xv5BCCCvCXbgwQhmGjsRPKaV0Rv17v6vReAZwkSbLxxOnl7ebul1oAWPiLy1JddwBCMgYIOTNqzIRgGbqne0WqAeCAwz7cXq6k88LD3p5VjbtuuVIAgBYSAGAY2ju6ggWA/oH03sk/fvKM8t4HHpXa245+ed2P+tN84RDESACAYQixAuAag/X0no877AOndVSq6XT/+/t6k+sv/1pvKh8GERMAYBiqtXCr1Q3W05mQ22HPt9e23/3A1O793/TT7/S+vOQ58//QYgIADEOtrSPYZzcagy1vkY/caOPSkSd9sbPVn7PGsiWLB6/+4b+7+ocUCAAwDEVfr/7oj53VOXrsxNS+xx+d/3ere3vSnW6AWBkDhGFI66n4tJUr1eSw4z/bkW7r/4K+BxZe78U/RClELS7m2QtSUioVK0KXSqVku7n7Vw8+5lMd02fNSe0FB4seu7d++QVfWJ3W5wECAJAkydQZ21R23Oug2q77vqs2YUp6i/0kSZIsfeGZwa99/v2rBvrTG2sEBACITqlUSiZO27w8a/Yu1c233a2yzY77VMeMmxxmRcPfPjt4zmlHr1rx8hL3/SFlAgAU2IhRY0uTN9miMnmTrcpTNt2qssmsOeVps7atdHSODH7vYvGiR+rnfe6Y7peXPm/kDwIQAKDAvvjdOzeq1lJ7gd+Q/fL6H/Vd/PW/7+nrXe3KHwKxGiCQmsWLHqlf/p3Tex6652ZP+8NrWQ0QKJp6fSB55N7/Hvjvq7/X98DCn/cPDqbzBkPIE2OAQCE89/Sj9btvubL/mScfrD/+wO31ntUr9RohYwQAoOmmbLpVZd7Bx5UfuuemgVpbe/8DC38+0N/XIwRAhggAQEuMHD2utOu+h9V23fewWm/Pqsb9d1w3cMeNl/Q9fM/NA42GLAChCQBAy7V3jCjtMu+dtV3mvbO29IVnBm+95vt9t15zUd+qFcskAQjEYkBAqsZN2qR86F/+v47Pf/v2UYd/8HMdY8dPdR6CABx4QBBtHV2lfQ/5QPs/fP2WUYcdf1pH16gxhpIgReVS8ur4QdobQJIkSbXWluz/zg+2/+M3bxs178/f31YquS4hPiHqsCMNyITOrlGlIz70+c5PnfWTkVNnbJPaSoQQKwEAyJQZW+1Ymf8vPxs57+DjsvcOYygQAQDInGqtLTnixNM7T/y7b3e1d4xw1xBaQAAAMmv73Q+sffKsK0aMmzjduQqazEEFZNrUGdtUPnHWT0ZO3mQL5ytoonLSSJIgG8AQjR47sXTqGZeMnLbZbA8HUkwB6rAxQCAXRo4eV/r4F388YpPN3yIEUDjGAAHWomvUmNKHT7twxJjxU5y7YJgcRECubDR2Qumkz17Q1dbRpZkIw2AxICiwTxy59fK29o5SW3tnUmvrKHWNHPN/2+jS6I0nlsaMm1IeM35KecKUzcqTpm9e7ugcmYuiOn3WdpX3f+Lszm+ccUJ36H2BvBIAoMAG6wNJT/fKRk/3yiRJksbSF55Z678fO35qecZWO1ZmbjO3svX2e1Wnz5qT2fvt2+/xttpeBx7Vdtu1P+gLvS+QRwIA8DvLliweXLZk8eCvbruqP0mSZMy4yeWd9zmktvfb3tc2adrmmbtleNjxp3U8dPdNA8uWLB4MvS+QN5k7oIHseHnp84M3XPHN3i+cvN+K75x1cvfSF57JVKHt6BpZOvpjZ3WG3g/II2OAwDo1Go3k7lv+q//Mjx+48le/vLo/9P681uyd3lqds8uf6maSa8YAgUzr6V7Z+NaZJ3Zf8d0v9jQa2Xmj18HHfKqjVHJpAetDAADW2/WXfa33P//9k6sHB+uhdyVJkiSZPmtOZce9DqqF3g/IEwEA2CB33HBx34VfOaU7K52AP3v3R9pD7wPkiQAAbLC7brmy/6cXndUTej+SJEk23eItlakztsns2CJkjQAADMs1P/5q7z23/jQTDwbuccCRbgPAEJkCgJwqlSuZOZR+eN5nVq985aXg9wJ23fddbeWyJgD5E2YKwHLAkEvVanYudletWNa47Nunrw69H6NGjy9tusX2EgD5E2I54HS+M6DZqrW20LvwBxbceGn/4kUPBx8L2Gr7vb0TAIZAAICcamvP3mp4N1zxjeDv5d96h70EABgCAQByatTocZkLAAtvuqIv9LMAM7fZpVIqObXBujhKIKdGjh6XueO3PtCfPHjnz4NOBLS1d5Y2njA1cz8byBoHCeTUmHGTM9cBSJIkue+OawdC78PEabOc22AdjAFCTk2YOjOTRe6JXy8MHgCy+rOBN2MxIGDIJk6dmclxt5XLlzZWLF8S9DmAcRM3cW6DdXCQQE5NnzUns8fvc08/GnQcsKNrpEYjrENmTyDA2o0ZN7k8ZvyUTB7DK5cvDdoByOKIJGRNJk8ewNDMmr1LJm8D9HSvDBoA2jtHhPx4yAUBAHJszi5/mp33Ab9GX2930ABQq7XrAMA6CACQY9vtsn81i4vfjNwo7DsK+vt6rDgC62AMEHJsxKixpW133jdzr76duc3coKmkt2dVyI+H9WY1QGC97f3292VqVaAZW+5QGTcp7Bhe7+pVzjLki9UAgfW13S771yZN2zwzx/K+hxzfHnofXnk57HsIIA8yc9IANky5XEn+/H2f7Ai9H0mSJJOmb1Ge+9a/CP5g4ovP/U/wZYkh6wQAKICd9j64tvm2uwZ/FuDwEz7XmYWHEpc89z+DofcBsk4AgAIolUrJMad8pbPW1hHsGdtd9z2sNnvnecFDSJIkyQuLnxQAYB0EACiICVNnlo/+6Jc6Q3z22PFTy0eceHqQz3695595fLB7xcueAYB1MAYIBbLrvu+qHXTUX6f6EF6lWkve/6lzOrtGjs7Eof34g7cHX40Q1pfVAIFhO+ioT3Qccuz8VB4KLJcrybGn/mtXFp4/WOPxBwQAGAoBAArobUd8rP34+ed1dY7YqGVX5Z1do0onnfbdEbtk4Kn/NeoD/cmv7/6FAABDIABAQe38J4fUPvPV60bO3efQWqnUvBxQKpWSufscWvvs+b8YlbW3ED5414393SuXu/8PQ5CpgxdorrHjp5aP+/S5XX/27pPrN191Yd9dN1/Z39uzYW/JG73xpPKOex1Unffn72+fOG1WJi8eFv7i8v7Q+wB5IQBABKbP2q5y9Ee/1HnEiad3PPnQwvqj9/1yYPGihwdffO6p+oqXlzb6ersbA/39Sa2tvVRta09GbTSuNGb8lPL4yZuWN5k1pzJjqx0r02fNqTSzk9BsK5YvaTyw8DoBAIZIAICI1No6SlvvsE916x32Kdyxf+NPvtXb39cbejcgN6rZzfMAQ7O6e0Xj5qsu7Au9H7ChQtTiqpX5gLy78Sff7O3pXulsRn4F+OvN5IM8AEO19IVnBq+79Dy9f1hPAgCQa5d88x963PuH9ScAQE7V695386vbruq/f4En/2FDCACQUz86/zOrQ+9DSC/99tnB758zP+qfAQyHAAA5tfAXl/Vde8m5Ufa+6/WB5DtfOrnbW/9gw1kNEHLsv773zz0xtsAv/dbnVv/Po/fUQ+8HNIvVAIH10mg0ku9++WOrn3ni/miK4XWXntd788/M/MNwCQCQc709qxpf/fujVi167N7Ch4AFN17af+V//FNP6P2AIhAAoAC6Vy5vfPXv37vqyYfvLGwIuPOmK/ovOvtT3Y2G2/7QDAIAFERP98rGuacds+qxB24v3HzgTT+9oO/Cfzml2+gjNI8AAAXS27Oqcc5pR6+65ervFeIeeaMxmPzX977Uc/E3Tlvtyh+aq3ArgkHs6gP9yY/O/8zqpx6+a+C9J5/Z2dbemcvBm+UvvTB44VdOWf3o/be57IcWsBogFNSCGy/tf/bJBwePn39e1+RNtsxVt+/+Bdf1X3T2p1avfOUll/1EwWqAQFMtXvRw/cxTDlyx31+c0P6O957a3t4xItOZ/7e/eXLw8gu+EOW7DYhcgFrsFgAUXL0+kFx/2dd6F/7i8v7DPnBax9x9Dq2F3qfXW/HyksY1F5/Te8tVF/Z60A/SIQBAJJa/9MLgBWd9pPuaH59d2e/QE9p2mfeutlpbe9B9WvTYvfWbfnpB7123XNlfH3DRD2kSACAyixc9Ur/oq59efeV//HPPPgcd27bbfoe3jZ+8aWrPCLy4+KnB++64tv/uW3/av+jRXxX2vQWQdQIARGrF8iWNq37wr71X/eBfe6dsulVlzq4HVN+y2wG1zbbeuVIuV5r2OS8veW5w0WP31p965O76Awuv73/+mccGm/bFgQ0mAADJc08/Wn/u6Ufr1116Xm9be2dp8iZblqfO2LoyZcY25SmbbFkZOXpcqaNzZKmja1Spo3NEUmvvKA309zX6elcn/b09jf6+nmTlKy81li1ZPLjsxcWDL734m8Glzz89+PQT99VfWfaiR40hg4wBAn+gr3d14+nH76s//fh92vOQkhC1OFezwQBAcwgAABAhAQAAIiQAAECEBAAAiJAAAAARMgYIAIFZDRAAYhSgFrsFAAAREgAAIEICAABESAAAgAgJAAAQIWOAABCY1QABgFQIAAAQIQEAACIkAABAhAQAAIiQAAAAETIGCACBGQMEAFJhOWAACM1ywABAGgQAAIiQAAAAERIAACBCxgABIDBjgABAKgQAAIiQAAAAERIAACBCAgAAREgAAIAIGQOEYbjt2h/03XbtD/pC7weQb8YAAYBUWA0QAEKzGiAAkAYBAAAiJAAAQIRMAQBAYKYAAIBUCAAAECEBAAAiJAAAQIQEAACIkAAAABEyBggAgRkDBABSIQAAQISsBggAoVkNEABIgwAAABESAAAgQsYAASAwY4AAQCoEAACIkAAAABESAAAgQgIAAERIAACACBkDBIDAjAECAKkQAAAgQlYDBIDQrAYIAKRBAACACAkAABAhY4AAEJgxQAAgFQIAAERIAACACAkAABAhAQAAIiQAAECEjAECQGDGAAGAVAgAABAhAQAAImQ5YAAIzXLAAEAaBAAAiJAxQAAIzBggAJAKAQAAIiQAAECEBAAAiJAAAAAREgAAIELGAAEgMGOAAEAqBAAAiJAAAAARKieNJAmyDcNu+50+enhfAQCaZ9h1KUAdDtYBOH7v40J9NABkRqh66BYAAETIGCAABBSqDusAAECEBAAAiJAAAAARym0AMAoIQBbktR4FDQAfMAoIQMRC1sHcdgAAgA1nDBAAAglZg3PdAcjrfRcAiiHPdSjXAQAA2DDBA8AJHgQEIEKh6191uCvzAQAbIHD9Dd4BGK48338BIL/yXn9yHwAAgPVXLiWvjiGE3D64l+cAAIjHB/c6LnjtLUQHIO9tGADypQh1pxABAABYP5kJAMO9DVCENAZA9g233mTltndmAgAAkB4BAAAilKkA4DYAAFlWlPZ/klgNEABSk6Wam6kOQJIkyYm6AABk0HDry3DrW7NlLgAAAK1XyACgCwBAMxWxrpSTRpJkbTtxz2y1SQBgOE7c87jgtfX1WyE7AElSzLQGQPqKWk8ysRjQG20f0gUAoAA+tGf4hX8KuxjQmylqagMgHUWuI5kOAM3oAhT5lwdA6zSjfmS5m53pAAAAtEbmA4AuAABpK/rVf5LkIAA0ixAAwFDEUi9yEQCynqIA4LXyULcyOwb4+q0ZYkl1AGyYZtWJ0DWzUGOAJzUpTQkBALyRZtWHZtWrVstNAEgSIQCA1oit+CdJzgIAANAcuQsAugAANFOMV/9JktHVANe5NYkQABC3ptaB0LUxhtUAT9qjeSlLCACIUzPP/82sS2nJzRjg67cPCwEAbKBmnvc/vEc2V/srzBjgGxECAFhfzS7+eZXrANBsQgBAsTnP/17uA0Cz05c/DoBiavb5Pc9X/0lSgACQJEIAAGun+P+xQgSAJBECAHhjiv8bK0wAaAUhACDfnMffXG7HAN9oO7kFqcwfD0A+teL8fXJOR/7ecLv4nxpNfLdeNpx3+wUt+boLbjxteUu+MABN06oLt1ZcZIZUyFsArfol6QYAZJviP3SFDABJIgQAxEbxXz+FvAXwWq26HZAkbgkAZEErL8yKWvyTpMAdgDVa+cvTDQAIS/HfcKWLzyx2B2CN8+5oXScgSXQDANLU6guwk3cvdvFPkoKNAa5t+0iLf5m6AQDpaPX59iO7F2jUb23bJZF0ANY4t8WdgCTRDQBohTQutFp9sZgl0QWAJEknBCSJIADQDGl1WGMq/kkSaQBIkvRCQJIIAgAbIs1bq7EV/ySJOAAkSbohIEkEAYChSPuZqhiLf5JEHgDWSDsIJIkwAPBaIR6kjrXwryEA/J8QISBJBAEgbqEmqGIv/kmSJKVLBYDfOSdQCFhDGABiEHps+qOKf5IkAsAbCh0E1hAIgCIIXfDXUPj/kADwJrISAl5LIADyICsF/7UU/z8mAKxFFkPAmxEOgDRlsci/GcX/jQkAQ5CnIADAqxT+tRMA1oMgAJB9Cv/QlJNGktiGtn10N39UAFn20d2OC14r8rKVLjtDB2BDfHXBBaF3AYD/8zEXaOtNABgmQQAgHIV/wwkATSIIAKRH4R8+AaDJBAGA1lH4m0cAaBFBAKB5FP7mEwBSIAwArD9Fv7UEgBQJAgDrpvCno3S5ABDE2cIAwO+couinTgDIAGEAiJGiH5YAkEECAVBECn62CAA5IRQAeaLYZ58AUADCARCCIp9vAgAARKiaKP8AEJ1qKfQeAACpK4feAQAgfQIAAERIAACACAkAABAhAQAAIiQAAECEjAECQIR0AAAgQgIAAERIAACACAkAABAhAQAAImQ1QACIkDFAAIiQWwAAECEBAAAiJAAAQIQEAACIkAAAABESAAAgQsYAASBCOgAAECEBAAAiJAAAQIQEAACIkAAAABH6X3vPtRCv8lFqAAAAAElFTkSuQmCC"
}

def write_assets(root):
  os.makedirs(os.path.join(root, "assets"), exist_ok=True)
  for path, content in ASSETS_TEXT.items():
    full = os.path.join(root, path)
    with open(full, "w", encoding="utf-8") as f:
      f.write(content)
  for path, b64 in ASSETS_BIN.items():
    full = os.path.join(root, path)
    os.makedirs(os.path.dirname(full), exist_ok=True)
    with open(full, "wb") as f:
      f.write(base64.b64decode(b64))

class Handler(SimpleHTTPRequestHandler):
  def end_headers(self):
    # Minimal CORS to allow local fetch if needed
    self.send_header("Access-Control-Allow-Origin", "*")
    return super().end_headers()

  def do_GET(self):
    # Minimal backend endpoint
    if self.path.startswith("/api/ping"):
      self.send_response(200)
      self.send_header("Content-Type","application/json")
      self.end_headers()
      self.wfile.write(json.dumps({"ok":True,"name":"pTau217App","version":"1.0"}).encode("utf-8"))
      return
    # Correct MIME for webmanifest
    if self.path.endswith(".webmanifest"):
      self.send_response(200)
      try:
        with open(self.translate_path(self.path), "rb") as f:
          data = f.read()
        self.send_header("Content-Type","application/manifest+json")
        self.send_header("Content-Length", str(len(data)))
        self.end_headers()
        self.wfile.write(data)
      except FileNotFoundError:
        self.send_error(404, "File not found")
      return
    return super().do_GET()

def find_free_port(start=PORT_START, limit=20):
  import socket
  for p in range(start, start+limit):
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
      s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
      try:
        s.bind(("127.0.0.1", p))
        return p
      except OSError:
        continue
  raise RuntimeError("No free port found")

def main():
  # Use a persistent dir under user profile so SW scope is stable across runs
  base = os.path.join(os.path.expanduser("~"), ".pTau217App")
  os.makedirs(base, exist_ok=True)
  write_assets(base)
  os.chdir(base)

  port = find_free_port()
  server = ThreadingHTTPServer(("127.0.0.1", port), Handler)

  def serve():
    print(f"Serving on http://127.0.0.1:{port}  (Ctrl+C to quit)")
    try:
      server.serve_forever(poll_interval=0.5)
    except KeyboardInterrupt:
      pass

  t = threading.Thread(target=serve, daemon=True)
  t.start()

  url = f"http://127.0.0.1:{port}/"
  try:
    webbrowser.open(url)
  except Exception:
    pass

  # Keep main thread alive
  try:
    while t.is_alive():
      time.sleep(0.5)
  finally:
    server.shutdown()

if __name__ == "__main__":
  main()
